// –î–µ–∫–æ—Ä–∞—Ç–æ—Ä ‚Äî —Ñ—É–Ω–∫—Ü–∏—è-–æ–±—ë—Ä—Ç–∫–∞, —Ä–∞—Å—à–∏—Ä—è—é—â–∏–π, –¥–æ–±–∞–≤–ª—è—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. 
// –§-–û, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –î–†–£–ì–£–Æ —Ñ—É–Ω–∫—Ü–∏—é –∏ –∏–∑–º–µ–Ω—è–µ—Ç –µ—ë –ø–æ–≤–µ–¥–µ–Ω–∏–µ.
// –§—É–Ω–∫—Ü–∏—è-–æ–±—ë—Ä—Ç–∫–∞ ¬´–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª

function slow(x) {
  return x * 10;
}

function cachingDecorator(func) {
  let cache = new Map();

  return function(x) { // –æ–±—ë—Ä—Ç–∫–∞
    if (cache.has(x)) {
      return cache.get(x);
    } 

    let result = func.call(this, x); // –¥–ª—è —Ä–∞–±–æ—Ç—ã, –∏—â–º–µ–Ω–µ–Ω–æ —Å func(x);
    cache.set(x, result);
    return result;
  }
}

// –ü—Ä–µ–º—É—â–µ—Å—Ç–≤–∞ –¥–µ–∫–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
`
1. –§—É–Ω–∫—Ü–∏—é-–æ–±—ë—Ä—Ç–∫—É –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
2. –õ–æ–≥–∏–∫–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –æ–Ω–∞ –Ω–µ —É–ª–∏—á–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ slow
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã –º–æ–∂–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ
`

slow = cachingDecorator(slow);
console.log(slow(20));

` –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äî –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –≤—ã—à–µ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç–æ–¥–∞–º–∏ –æ–±—ä–µ–∫—Ç–∞`
let worker = {
  someMethod() {
    return 1;
  },

  slow(x) {
    return x * this.someMethod();
  }
}

worker.slow = cachingDecorator(worker.slow);
console.log('hi', worker.slow(20)); // error –≤—ã–∑–æ–≤ –ø–µ—Ä–µ–¥–∞—ë—Ç –æ—Ä–≥–∏ –º–µ—Ç–æ–¥—É, –Ω–æ –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.



// –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ –º–µ–∂–¥—É call –∏ apply —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ call –æ–∂–∏–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ apply –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—Å–µ–≤–¥–æ–º–∞—Å—Å–∏–≤.
function fn() {
  console.log('function');
}

let obj = {
  name: '–î–∏–º–∞'
}

fn(1,2,3);
fn.call(obj, 1, 2, 3); // –æ–¥–∏–Ω–∞–∫–æ–≥–æ
fn.apply(obj)
// ‚ù§Ô∏è‚Äçüî• –ü–µ—Ä–µ–¥–∞—á–∞ –≤—Å–µ—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –≤–º–µ—Å—Ç–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –¥—Ä—É–≥–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ 
// –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è ¬´–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –≤—ã–∑–æ–≤–∞¬ª (call forwarding).

let wrapper = function() {
  return func.apply(this, arguments);
};



// –ó–∞–∏–º—Ç—Å–æ–≤–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞
function hash() {
  return arguments[0] + ',' + arguments[1];
}

// –°–¥–µ–ª–∞–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–µ–µ
function hash2() {
  console.log([].join.call(arguments));
  // –ë–µ—Ä—ë–º call, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–µ—Ç–æ–¥ –Ω–∞–¥ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º, —É –ø—Å–µ–≤–¥–æ–º–∞—Å—Å–∏–≤–æ–≤ –Ω–µ—Ç –º–µ—Ç–æ–¥–∞;
}